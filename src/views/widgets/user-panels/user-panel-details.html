<template>
    <require from="../inputs/form-input"></require>
    <require from="../inputs/form-select"></require>
    <require from="../filter"></require>
    <require from="../../../resources/constants"></require>
    <require from="../../../resources/select2"></require>

    <form-input name="firstName" model.two-way="user.user.firstName" is-mandatory="true"></form-input>
    <form-input name="lastName" model.two-way="user.user.lastName" is-mandatory="true"></form-input>

    <div class="divider"></div>
    <div class="col-xs-12" if.bind="CV.debugShowOutput">? DEV NOTE: SELECT [1,3,8,9] ... SELECTED: ${user.firstName}: ${user.lkp_region_selected} > ${user.lkp_hub_selected} > ${user.lkp_segment_selected} > ${user.lkp_entity_selected} ?</div>
    
     <!--<div class="divider"></div>
    ? ${user.profile.region.id} > ${user.profile.hub.id} !
     <div class="divider"></div>-->

    <form-select name="region"
        model.two-way="user.profile.region.id"
        options.bind="lkp_region"
        changed.two-way="user.profile.region.id"
        autocomplete.bind="true"
        init-selected.two-way="user.profile.region.id"></form-select>

    <form-select inp-label="hub"
        prop-arr.bind="['id','name','regionId']"
        model.two-way="user.profile.hub.id"
        options.bind="lkp_hub"
        changed.two-way="user.profile.hub.id"        
        init-selected.two-way="user.profile.hub.id"
        option-filter.bind="['regionId',user.profile.region.id]"
        is-enabled.bind="user.profile.region.id"></form-select>

    <!--<div class="form-group col-xs-12">
        <label class="col-sm-6" for.bind="name" title.bind="inpLabel">
            Hub
        </label>
        <div class="col-sm-6">
            <select class="form-control"
                model.bind="user.profile.hub.id"
                disabled.bind="!user.profile.region.id"        
                >        
                <option value="">Select...</option>
                <option repeat.for="option of lkp_hub | filter:'regionId':user.profile.region.id" value="option.id" selected.bind="option.id==user.profile.hub.id">
                    ${option.name}
                </option>
            </select>
        </div>
    </div>-->
  
     <div class="divider"></div>
     
    <form-select name="segment"
        model.two-way="user.profile.segment.id"
        options.bind="lkp_segment"
        changed.two-way="user.profile.segment.id"        
        init-selected.two-way="user.profile.segment.id"
        autocomplete.bind="true"
        ></form-select>

    <div class="form-group col-xs-12">
        <label class="col-sm-6" for.bind="name" title.bind="inpLabel">
            Entity
        </label>
        <div class="col-sm-6">
            <select class="form-control"
                model.bind="user.profile.entity.id"
                disabled.bind="!user.profile.segment.id"        
                >        
                <option value="">Select...</option>
                <option repeat.for="option of lkp_entity | filter:'segmentId':user.profile.segment.id" value="option.id" selected.bind="option.id==user.profile.entity.id">
                    ${option.name}
                </option>
            </select>
        </div>
    </div>

    <!--<form-select name="lkp_entity"
        model.two-way="user.lkp_entity_selected"
        options.bind="lkp_entity"
        changed.two-way="user.lkp_entity_selected"        
        init-selected.two-way="user.lkp_entity_selected"
        option-filter.bind="user.lkp_segment_selected"
        autocomplete.bind="true"
        is-enabled.bind="user.lkp_region_selected && user.lkp_hub_selected && user.lkp_segment_selected"></form-select>-->

    
    <div class="divider"></div>

    <form-input name="function" model.two-way="user.profile.function"></form-input>
    <form-input name="location" model.two-way="user.profile.location"></form-input>
    <form-input name="emailAddress" model.two-way="user.user.emailAddress" is-mandatory="true"></form-input>

    
    <!--<form-input name="personalNumber" model.two-way="user.personalNumber" mask-pattern="telephone"></form-input>
    <form-input name="officeNumber" model.two-way="user.officeNumber" mask-pattern="telephone"></form-input>-->

    <div class="divider"></div>
    <form-select name="lkp_bp_office_address"
        model.two-way="user.lkp_bp_office_address_selected"
        options.bind="lkp_bp_office_address"
        changed.two-way="user.lkp_bp_office_address_selected"
        autocomplete.bind="true"
        init-selected.two-way="user.lkp_bp_office_address_selected"></form-select>

    <form-input name="personalNumber" model.two-way="user.profile.personalNumber" is-mandatory="true" mask-pattern="telephone"></form-input>
    <form-input name="officeNumber" model.two-way="user.profile.officeNumber" mask-pattern="telephone"></form-input>
    <form-input name="homeNumber" model.two-way="user.profile.homeNumber" mask-pattern="telephone"></form-input>

    <div class="divider"></div>

    <form-input name="lineManager" model.two-way="user.user.lineManager.displayName"></form-input>
    <form-input name="lineManager_emailAddress" model.two-way="user.user.lineManager.emailAddress"></form-input>

    <div class="divider"></div>

    <form-input name="emergencyContactName" model.two-way="user.profile.emergencyContactName"></form-input>
    <form-input name="emergencyContactNumber" model.two-way="user.profile.emergencyContactNumber" mask-pattern="telephone"></form-input>

</template>