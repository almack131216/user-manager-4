<template>

    <require from="../inputs/form-input"></require>
    <require from="../inputs/form-radio"></require>
    <require from="../../../resources/format/json"></require>
    <require from="aurelia-kendoui-bridge/datepicker/datepicker"></require>

    <div class="row-fluid">
        <div class="col-xs-12" innerhtml.bind="message"></div>
    </div>

    <pre if.bind="CV.debugShowCodeOutput">${myLookups.trainings & json}</pre>
    <pre if.bind="CV.debugShowCodeOutput">${myTrainingArr & json}</pre>
    <pre if.bind="CV.debugShowCodeOutput">${myTrainingArrDynamic & json}</pre>
    <pre if.bind="CV.debugShowCodeOutput">
        <ul>
            <li repeat.for="row of myLookups.trainings">
                ${row & json}
            </li>
        </ul>
    </pre>

    <div class="col-xs-12">
        <table class="table cols-3 user-panel-table padded-cells" if.bind="myTrainingArr && myLookups.trainings">
            <thead>
                <tr>
                    <th>${CV.myLabels.training}</th>
                    <th>${CV.myLabels.attended}</th>
                    <th>${CV.myLabels.expiryDate}</th>
                </tr>
            </thead>
            <tbody>
                <tr repeat.for="row of myLookups.trainings" if.bind="!isReadOnly || isReadOnly && returnTrainingData(row.id,'trainingId')">
                    <td>
                        <label>${row.name}</label>
                    </td>
                    <td>
                        <span if.bind="returnTrainingData(row.id,'trainingId')">
                            <i class="fa fa-check text-after color-good"></i>
                            ${ returnTrainingData(row.id,'trainingId') }                            
                        </span>
                    </td>
                    <td>
                        <!--<span>${ profile.trainings[$index] & json }</span>-->
                        <!--<form-input if.bind="returnTrainingData(row.id,'expiresOn')"
                            cust-name.bind="['trainingExpiryDate_' + $index]"
                            cust-type="date" 
                            cust-label="Expiry Date"
                            model.two-way="profile.trainings[$index].expiresOn"
                            cust-mandatory.bind="true"
                            input-only="true"
                            cust-readonly.bind="user.trainings[$index].attended || isReadOnly"></form-input>-->
                            <!--? ${returnTrainingData(row.id,'expiresOn')} !-->
                        <input if.bind="isReadOnly" class="form-control" type="text" value.bind="profile.trainings[$index].expiresOn ? profile.trainings[$index].expiresOn : '---'" readonly>
                        <input if.bind="!isReadOnly && returnTrainingData(row.id,'expiresOn')" class="k_datepicker"
                        id.bind="['trainingExpiryDate_' + $index]"  name.one-way="['trainingExpiryDate_' + $index]"
            ak-datepicker="k-value.two-way: profile.trainings[$index].expiresOn;k-format:{0:dd/MM/yyyy}"
            k-on-ready.delegate="onReady($event.detail,profile.trainings[$index].expiresOn)"
            k-on-change.delegate="onChange($event.detail,profile.trainings[$index].expiresOn)">
                    </td>
                </tr>                
            </tbody>
        </table>
    </div>

</template>