<template>

    <require from="../widgets/inputs/form-input"></require>
    <require from="../widgets/inputs/form-select"></require>

    <div class="hdr-wrap">
        <h1 class="hdr-inline">${title}<span class="html-file-name">(user-list.html)</span></h1>
        <a class="btn btn-default btn-i pull-right" click.delegate="addUser()">
            <i class="fa fa-plus"></i>Add User
        </a>
        <a class="btn btn-default btn-i pull-right" click.delegate="changeUserRoles()">
            <i class="fa fa-plus"></i>Change User Roles
        </a>
    </div>

    <p if.bind="debugShowOutput">found: ${found} / ${selectedId} / filter: ${filters}</p>
    <p if.bind="debugShowOutput">rolesArrDynamic: ${rolesArrDynamic}</p>

    <div class="row">
        <div class="col-md-6 form-group">
            <form-input name="filter" model.two-way="filters[0].value"></form-input>
        </div>

        <div class="col-md-6 form-group">
            <!--<select id="rolesFilter" class="form-control" value.bind="filters[1].value">
                        <option value="">Please Select</option>
                        <option repeat.for="role of rolesArrValues" model.bind="role">${rolesArrLabels[$index]}</option>
                    </select>-->
            <p if.bind="debugShowOutput">filters[1].value: ${filters[1].value} / ${rolesArrDynamic}</p>
            <form-select name="filter role" model.two-way="filters[1].value" options.bind="rolesArrDynamic" changed.two-way="filters[1].value"
                init-selected.two-way="filters[1].value"></form-select>
        </div>
    </div>





    <!--<h2 if.bind="custDisableCells">custDisableCells: ${custDisableCells}</h2>-->

    <table class="table table-striped" aurelia-table="data.bind: users; display-data.bind: $displayData; filters.bind: filters">
        <thead>
            <tr>
                <th aut-sort="key: id; default: desc" if.bind="isNotDisabled('id')">id</th>
                <th aut-sort="key: first_name" if.bind="isNotDisabled('first_name')">First Name</th>
                <th aut-sort="key: last_name" if.bind="isNotDisabled('last_name')">Last Name</th>
                <th aut-sort="key: email" if.bind="isNotDisabled('email')">E-mail</th>
                <th aut-sort="key: cell_number" if.bind="isNotDisabled('cell_number')">Telephone</th>
                <th aut-sort="key: mrt_system_role" if.bind="isNotDisabled('permission')">Permission</th>
                <th if.bind="isNotDisabled('edit')">Edit</th>
            </tr>
        </thead>
        <tbody>
            <tr repeat.for="user of $displayData" class="${user.id === $parent.selectedId ? 'active' : ''}">
                <td if.bind="isNotDisabled('id')">${user.id}</td>
                <td if.bind="isNotDisabled('first_name')">${user.first_name}</td>
                <td if.bind="isNotDisabled('last_name')">${user.last_name}</td>
                <td if.bind="isNotDisabled('email')"><a href="mailto:${user.email}">${user.email}</a></td>
                <td if.bind="isNotDisabled('cell_number')"><a href="tel:${user.cell_number}">${user.cell_number}</a></td>
                <td if.bind="isNotDisabled('mrt_system_role')">${user.mrt_system_role}</td>
                <td if.bind="isNotDisabled('edit')">
                    <a route-href="route: users; params.bind: {id:user.id}" title="Quick edit">
                        <i class="fa fa-pencil"></i>
                    </a>
                    <a route-href="route: user-edit; params.bind: {id:user.id, editType:'edit'}" title="Full edit" class="margin-left-1">
                        <i class="fa fa-list"></i>
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
</template>